<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/moon.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h1>2 issues</h1>
					<h1>in Typescript</h1>
				</section>
				<section>
					<section>Issue 1</section>
					<section>"Are you sure?" or additional checking</section>
					<section>
					  <div>
							<pre>
								<code data-trim data-noescape>
									interface Car {
									id: number;
									color: string;
									model: string;
									brand: string;
									}

									interface TuningCar extends Car {
									engine: true;
									moveFaster: () => number;
									}
								</code>
								<code data-trim data-noescape>
									async function fetchCar() {
										const response = await fetch("someUrl/id");
										const carNonCorrect: TuningCar = await response.json();
									}
								</code>
							</pre>
						</div>
						<span style="color: rgb(235, 90, 90)">NOT-recommended</span>
						<image src="./examples/assets/surprised.jpg" width="150" height="auto" style="display: block; left: 2; bottom: 5;"></image>
					</section>
					<section>
						<h2 class="fragment" data-fragment-index="1">Type unknown</h2>
						<p class="fragment" data-fragment-index="2">Anything is assignable to unknown</p>
						<p class="fragment" data-fragment-index="3">Unknown is not assignable to anything but itself and any</p>
						<p class="fragment" data-fragment-index="4">No operations are permitted on an unknown without first asserting or narrowing to a more specific type</p>
						<p class="fragment" data-fragment-index="5"><pre><code>
							function f11(x: unknown) {
							x.foo; // Error
							x[5]; // Error
							x(); // Error
							new x(); // Error
							}
						</code></pre>
					</section>
					<section>
						<pre>
							<code data-trim data-noescape>
								interface TuningCar extends Car {
									engine: true;
									moveFaster: () => number;
								}
							</code>
							<code data-trim data-noescape>
								function isTuningCar(object: unknown): object is TuningCar {
									if (object !== null && typeof object === "object") {
										return "engine" in object;
									}
								return false;
								}

								async function fetchCar() {
									const response = await fetch("someUrl");
									const correctCar: unknown = await response.json();
									if (isTuningCar(correctCar)) {
										// some code
									}
								}
							</code>
						</pre>
						<span style="color: rgb(235, 90, 90)">RECOMMENDED</span>
					</section>
					<section>
						<image src="./examples/assets/cat-laptop.jpg" class="r-stretch" width="150" height="auto" style="display: block; right: 2;">
						</image>
						<h3><span style="color: crimson;">Conclusion:</span> be sure that the necessary data are recieved from server </h3>
					</section>
				</section>
				<section>
					<section>Issue 2</section>
					<section>Enums, what wrongs with them?</section>
					<section>
						<h3>Enum</h3>
						<pre>
							<code>
								enum FilePerm {
								None,
								Read,
								Write,
								Execute,
								}

								console.log(FilePerm);
							</code>
						</pre>
					</section>
					<section>
						<h3>Enum is very strange object</h3>
						<pre>
							<code>
								{
									'0': 'None',
									'1': 'Read',
									'2': 'Write',
									'3': 'Execute',
									None: 0,
									Read: 1,
									Write: 2,
									Execute: 3
								}
							</code>
						</pre>
					</section>
					<section>
						<h3>Let us look at the keys</h3>
						<image src="./examples/assets/look-down.jpg" width="150" height="auto" style="display: block; margin: 0 auto;">
						</image>
						<pre>
							<code>
								enum FilePerm {
								None,
								Read,
								Write,
								}

								console.log(FilePerm.None); // 0
								console.log(FilePerm.Read); // 1
								console.log(FilePerm.Write); // 2
							</code>
						</pre>
					</section>
					<section>
						<h3>Add Execute to the FilePerm</h3>
						<image src="./examples/assets/look-down.jpg" width="150" height="auto" style="display: block; margin: 0 auto;">
						</image>
						<pre>
							<code>
								enum FilePerm {
									Execute,
									None,
									Read,
									Write,
								}

								console.log(FilePerm.None); // 1
								console.log(FilePerm.Read); // 2
								console.log(FilePerm.Write); // 3
								console.log(FilePerm.Execute); // 0
							</code>
						</pre>
					</section>
					<section>
						<pre>
							<code>
								function doSmth(param: FilePerm) {
								console.log('hi');
								}
								doSmth(FilePerm.Execute); // ok
								doSmth(FilePerm.Read); // ok
								doSmth("jjj"); // Error
								doSmth(234) // ok - not Error
							</code>
						</pre>
						<image src="./examples/assets/broken-tree.jpg" width="250" height="auto" style="display: block; margin: 0 auto;">
						</image>
					</section>
					<section>
						<pre>
							<code>
								enum FilePermValue {
									read = "Read",
									write = "Write",
									execute = "Execute",
								}

								function doSmthElse(param: FilePermValue) {
									console.log('hi');
								}
								doSmthElse(FilePermValue.execute); // ok
								doSmthElse(FilePermValue.read); // ok
								doSmthElse("jjj"); // Error
								doSmthElse(234) // Error
							</code>
						</pre>
					</section>
					<section>
						<h2>Be aware of using Enums</h2>
						<image class="r-stretch" src="./examples/assets/cat-eat.jpg" width="250" height="auto" style="display: block; margin: 0 auto;">
						</image>
					</section>
				</section>
				<section>
					<h1>Thank you for the attention</h1>
					<h4>Extra-question: how many cats were shown in the presentation?</h4>
				</section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
